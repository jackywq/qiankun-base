# qiankun 微前端展示设计（Ant Design Pro 风格）

## 目标与范围
- 基座：Vue2 + `ant-design-vue@1.x`，采用左侧菜单 + 顶部用户信息的布局，承载自身页面与两个子应用的挂载容器。
- 子应用：
  - Vue 子应用（端口 `10000`，激活规则 `/vue`）。
  - React 子应用（端口 `20000`，激活规则 `/react`）。
- 统一交互与视觉：参考 Ant Design Pro 的信息架构、间距与组件使用规范。

---

## 基座（Vue）布局与导航规范
- 布局结构：
  - 左侧 `Sider`：主导航菜单，宽度约 `200px`，含三项：`Home`、`vue应用`、`react应用`。
  - 顶部 `Header`：右侧展示用户信息（头像、昵称），点击弹出 `个人中心/退出登录` 菜单。
  - 中部 `Content`：页面内容与子应用挂载区域。
- 路由与挂载：
  - `/#app` 下包含三个区域：
    - `router-view`：基座自身页面（如 Home）。
    - `#vue`：Vue 子应用挂载容器（当路由以 `/vue` 开头时激活并渲染）。
    - `#react`：React 子应用挂载容器（当路由以 `/react` 开头时激活并渲染）。
- 选中态与联动：
  - 菜单选中依据当前路由：`/vue` 选中“vue应用”，`/react` 选中“react应用”，其他为“Home”。
- 间距与样式：
  - 内容区统一使用白色卡片背景，内边距 `24px`，页面边距 `24px`。
  - Header 高度 `64px`，字号与色值遵循 Ant Design 默认主题。

---

## Vue 子应用展示内容与路由设计
- 技术栈与端口：Vue2，开发端口 `10000`，以 UMD 方式暴露并允许跨域加载。
- 路由结构（建议）：
  - `/vue`：仪表盘页（作为默认页）。
  - `/vue/list`：列表页（示例数据表格）。
  - `/vue/about`：关于页（项目信息与版本）。
- 页面内容规范：
  - 仪表盘：
    - 顶部显示“Vue 子应用”标题与昨日/今日关键指标 `Statistic`（PV、转化率、活跃用户）。
    - 中部为 2~3 个 `Card`，展示图表或趋势（可后续接入真实数据）。
  - 列表页：
    - 使用 `Table` 展示示例数据（列：名称、状态、更新时间）。
    - 支持分页、排序与筛选（演示即可）。
  - 关于页：
    - 展示版本、构建时间、维护者信息；说明与基座的通信方式（`props`、事件等）。

---

## React 子应用展示内容与路由设计
- 技术栈与端口：React 16 + `antd@4.x`，开发端口默认 `20000`（如被占用，可能自动切换为 `10002`）。
- 路由结构（建议）：
  - `/react`：欢迎页（默认页）。
  - `/react/chart`：图表页（基于 `@ant-design/charts`）。
  - `/react/list`：列表页（示例数据表格）。
- 页面内容规范：
  - 欢迎页：
    - 使用 `Card` + `Result`/`Statistic` 展示欢迎信息与当前环境。
    - 提供跳转按钮至“图表页”和“列表页”。
  - 图表页：
    - 使用折线/面积图展示示例指标趋势，体现与 Ant Design Pro 一致的可视化风格。
  - 列表页：
    - 使用 `Table` 展示示例数据，支持分页与选择。

---

## 集成、通信与加载态
- 应用注册：
  - 基座通过 `registerMicroApps` 注册两个子应用：
    - `vueApp`：`entry: //localhost:10000`，`container: #vue`，`activeRule: /vue`。
    - `reactApp`：`entry: //localhost:20000`，`container: #react`，`activeRule: /react`。
- 通信方案：
  - 通过 `props` 下发只读配置（如用户信息、全局环境、主题），示例：`{ a: 1 }`。
  - 事件通信：建议统一封装一个微前端事件总线（如 `window.__MICRO_APP_BUS__` 或基座 `store` 的订阅接口），用于广播通知（如用户登出、主题切换）。
- 加载与错误：
  - 子应用加载期间在容器内展示 `Skeleton` 或 `Spin`。
  - 监听并上报加载失败、资源超时等错误；在容器内渲染错误占位与重试按钮。
- 资源与安全：
  - 子应用需设置跨域响应头 `Access-Control-Allow-Origin: *`（开发阶段），并以 `umd` 方式导出库名，避免命名冲突。

---

## 运行与调试
- 启动全部：`npm run start`（基座 + 两个子应用）。
- 独立启动：
  - 基座：`npm run serve` → `http://localhost:8083/`（端口以本地环境为准）。
  - Vue 子应用：进入 `qiankun-vue` 目录执行 `npm run serve` → `http://localhost:10000/`。
  - React 子应用：进入 `qiankun-react` 目录执行 `npm run start-no-open` → 默认 `http://localhost:20000/`（占用时可能为 `10002`）。
- 访问路径：
  - 基座主页：`/`
  - Vue 子应用：`/vue`（及其子路由）。
  - React 子应用：`/react`（及其子路由）。

---

## 可选增强（按需迭代）
- 主题定制：通过 Less 覆盖 Antd 主题变量以匹配企业品牌色。
- 菜单权限：依据用户角色动态生成菜单；未授权页面显示 `403`。
- 面包屑与页面标题：按路由自动生成，提升导航感知与 SEO。
- 性能优化：按需预加载子应用、静态资源缓存与路由级代码分割。
- 监控与埋点：上报页面加载时间、错误日志与关键交互事件。
